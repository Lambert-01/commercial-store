<%- include('../partials/admin-header') %>

<!-- Admin Dashboard with Tailwind + DaisyUI -->
<div class="min-h-screen bg-neutral-100 p-8">
  <!-- Dashboard Header -->
  <div class="bg-gradient-to-r from-secondary to-yellow-400 rounded-2xl p-8 mb-8 shadow-lg animate__animated animate__fadeInDown"
       data-aos="fade-down">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-neutral-900 mb-2 flex items-center gap-4">
          üìä Admin Dashboard
        </h1>
        <p class="text-lg md:text-xl text-neutral-800 opacity-90">
          Manage your marketplace, users, and suppliers
        </p>
      </div>
      <div class="hidden md:block text-6xl animate-bounce">üëë</div>
    </div>
  </div>

  <!-- Stats Cards with Tailwind Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
    <!-- Total Users Card -->
    <div class="stat-card-rwanda animate__animated animate__fadeInUp"
         data-aos="flip-left"
         data-aos-delay="100">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wider">Total Users</h3>
        <div class="w-12 h-12 bg-primary rounded-xl flex items-center justify-center text-2xl">
          üë•
        </div>
      </div>
      <p class="text-3xl md:text-4xl font-bold text-neutral-900 mb-2"><%= totalUsers || 0 %></p>
      <span class="text-sm font-medium text-success">+12% from last month</span>
    </div>

    <!-- Total Products Card -->
    <div class="stat-card-rwanda animate__animated animate__fadeInUp"
         data-aos="flip-left"
         data-aos-delay="200">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wider">Total Products</h3>
        <div class="w-12 h-12 bg-secondary rounded-xl flex items-center justify-center text-2xl">
          üì¶
        </div>
      </div>
      <p class="text-3xl md:text-4xl font-bold text-neutral-900 mb-2"><%= totalProducts || 0 %></p>
      <span class="text-sm font-medium text-success">+8% from last month</span>
    </div>

    <!-- Total Orders Card -->
    <div class="stat-card-rwanda animate__animated animate__fadeInUp"
         data-aos="flip-left"
         data-aos-delay="300">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wider">Total Orders</h3>
        <div class="w-12 h-12 bg-accent rounded-xl flex items-center justify-center text-2xl">
          üõí
        </div>
      </div>
      <p class="text-3xl md:text-4xl font-bold text-neutral-900 mb-2"><%= totalOrders || 0 %></p>
      <span class="text-sm font-medium text-success">+25% from last month</span>
    </div>

    <!-- Revenue Card -->
    <div class="stat-card-rwanda animate__animated animate__fadeInUp"
         data-aos="flip-left"
         data-aos-delay="400">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wider">Revenue</h3>
        <div class="w-12 h-12 bg-success rounded-xl flex items-center justify-center text-2xl">
          üí∞
        </div>
      </div>
      <p class="text-3xl md:text-4xl font-bold text-neutral-900 mb-2">125,000 RWF</p>
      <span class="text-sm font-medium text-success">+18% from last month</span>
    </div>
  </div>

  <!-- Pending Products Section -->
  <div class="mb-12">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-8">
      <h2 class="text-2xl md:text-3xl font-bold text-neutral-900 mb-4 md:mb-0 flex items-center gap-3">
        ‚è≥ Pending Product Approvals
      </h2>
      <span class="status-badge-rwanda status-badge-pending text-sm">
        <%= pendingProducts ? pendingProducts.length : 0 %> Pending
      </span>
    </div>

    <% if (pendingProducts && pendingProducts.length > 0) { %>
      <!-- Products Table with Tailwind -->
      <div class="bg-white rounded-xl shadow-lg overflow-hidden animate__animated animate__fadeInUp"
           data-aos="fade-up"
           data-aos-delay="200">
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-neutral-200">
            <thead class="bg-neutral-50">
              <tr>
                <th class="px-6 py-4 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Product Name</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Supplier</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Price</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Date Submitted</th>
                <th class="px-6 py-4 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-neutral-200">
              <% pendingProducts.forEach((product, index) => { %>
                <tr class="hover:bg-neutral-50 transition-colors duration-200 animate__animated animate__fadeInUp"
                    data-aos="fade-up"
                    data-aos-delay="<%= (index + 1) * 100 %>">
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="font-medium text-neutral-900"><%= product.name %></div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-neutral-700"><%= product.supplier.name %></div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="font-semibold text-secondary"><%= product.price %> RWF</span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="status-badge-rwanda status-badge-pending">Pending</span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="text-neutral-600 text-sm"><%= new Date(product.createdAt).toLocaleDateString() %></span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                    <div class="flex gap-2">
                      <button class="bg-secondary hover:bg-yellow-500 text-neutral-900 font-medium py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 approve-product"
                              data-product-id="<%= product._id %>"
                              onclick="approveProduct('<%= product._id %>')">
                        ‚úÖ Approve
                      </button>
                      <button class="bg-neutral-200 hover:bg-neutral-300 text-neutral-800 font-medium py-2 px-4 rounded-lg transition-all duration-200 reject-product"
                              data-product-id="<%= product._id %>"
                              onclick="rejectProduct('<%= product._id %>')">
                        ‚ùå Reject
                      </button>
                    </div>
                  </td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    <% } else { %>
      <!-- Empty State -->
      <div class="bg-white rounded-xl shadow-lg p-16 text-center animate__animated animate__fadeInUp"
           data-aos="zoom-in">
        <div class="text-6xl mb-6">‚úÖ</div>
        <h3 class="text-xl md:text-2xl text-neutral-900 mb-4">
          All Caught Up!
        </h3>
        <p class="text-neutral-600 mb-8">
          No pending product approvals at the moment. Great job keeping the marketplace clean!
        </p>
      </div>
    <% } %>
  </div>

  <!-- Quick Actions -->
  <div class="mb-12">
    <h2 class="text-2xl md:text-3xl font-bold text-neutral-900 mb-8 flex items-center gap-3">
      ‚ö° Quick Actions
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Manage Users Card -->
      <a href="/admin/users"
         class="admin-card text-center group cursor-pointer animate__animated animate__fadeInUp"
         data-aos="flip-left"
         data-aos-delay="100">
        <div class="w-16 h-16 bg-primary mx-auto mb-4 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform duration-300">
          üë•
        </div>
        <h3 class="text-lg font-semibold mb-2 text-neutral-900 group-hover:text-secondary transition-colors duration-200">
          Manage Users
        </h3>
        <p class="text-neutral-600 text-sm">
          View and manage all users in the system
        </p>
      </a>

      <!-- All Products Card -->
      <a href="/admin/products"
         class="admin-card text-center group cursor-pointer animate__animated animate__fadeInUp"
         data-aos="flip-left"
         data-aos-delay="200">
        <div class="w-16 h-16 bg-secondary mx-auto mb-4 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform duration-300">
          üì¶
        </div>
        <h3 class="text-lg font-semibold mb-2 text-neutral-900 group-hover:text-secondary transition-colors duration-200">
          All Products
        </h3>
        <p class="text-neutral-600 text-sm">
          Manage all products in the marketplace
        </p>
      </a>

      <!-- Order Management Card -->
      <a href="/admin/orders"
         class="admin-card text-center group cursor-pointer animate__animated animate__fadeInUp"
         data-aos="flip-left"
         data-aos-delay="300">
        <div class="w-16 h-16 bg-accent mx-auto mb-4 rounded-full flex items-center justify-center text-2xl group-hover:scale-110 transition-transform duration-300">
          üõí
        </div>
        <h3 class="text-lg font-semibold mb-2 text-neutral-900 group-hover:text-secondary transition-colors duration-200">
          Order Management
        </h3>
        <p class="text-neutral-600 text-sm">
          Track and manage customer orders
        </p>
      </a>
    </div>
  </div>
</div>

<script src="/js/admin.js"></script>

<%- include('../partials/footer') %>